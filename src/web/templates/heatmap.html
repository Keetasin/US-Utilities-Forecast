{% extends "base.html" %}
{% block title %}Stock Heatmap{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/heatmap.css') }}">

<h2 class="title">Stock Heatmap</h2>

<div class="legend" aria-label="Heatmap legend">
  <span>-3%</span>
  <div class="legend-bar"></div>
  <span>3%</span>
</div>

<div class="grid-container" role="list">
  {% for stock in data %}
    <a href="{{ url_for('views.stock_detail', symbol=stock.symbol) }}" role="listitem" aria-label="Open {{ stock.symbol }}">
      <div
        class="stock-card {% if stock.change >= 0 %}positive{% else %}negative{% endif %}"
        style="background-color: {{ stock.bg_color }};"
        data-tooltip="{{ stock.symbol }}"
      >
        <h3>{{ stock.symbol }}</h3>

        <p class="price">${{ '%.2f'|format(stock.price) }}</p>

        <p class="change">{{ '%.2f'|format(stock.change) }}%</p>
      </div>
    </a>
  {% endfor %}
</div>

{% if last_updated %}
  <p class="last-updated">Last updated: {{ last_updated }}</p>
{% else %}
  <p class="last-updated">Last updated: N/A</p>
{% endif %}

{% endblock %}